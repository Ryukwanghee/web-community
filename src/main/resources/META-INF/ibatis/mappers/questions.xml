<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="questions">

	<insert id="insertQuestion" parameterClass="com.community.vo.Question">
		insert into comm_posts
			(post_no, post_board_no, post_title, post_writer_no, post_content)
		values
			(comm_posts_seq.nextval, #boardNo#, #title#, #writerNo#, #content#)
	</insert>
	

	<select id="getQuestions" parameterClass="map" resultClass="com.community.vo.Question">
		select
			post_no as no,
			post_board_no as boardNo,
			post_title as title,
			post_writer_no as writerNo,
			post_content as content,
			post_important as important,
			post_read_count as readCount,
			post_suggestion_count as suggestionCount,
			post_comment_count as commentCount,
			post_deleted as deleted,
			post_created_date as createdDate,
			post_updated_date as updateDate,
			post_original_no as originalNo
		from
			(select
				row_number() over (order by post_no desc) row_numbers,
				post_no, post_board_no, post_title, post_writer_no, post_content,
				post_important, post_read_count, post_suggestion_count,
				post_comment_count, post_deleted, post_created_date,
				post_updated_date, post_original_no
			from
				comm_posts
			where
				post_board_no = 105)
		where
			row_numbers between #begin# and #end#
	</select>

	<select id="getTotalRows" resultClass="int">
		select
			count(*)
		from 	
			comm_posts
		where
			post_board_no = 105	
	</select>
</sqlMap>

