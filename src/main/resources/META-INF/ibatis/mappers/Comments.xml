<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
 
<sqlMap namespace="comments">

	<!-- 
		리뷰정보(내용,게시글번호 전달받아서 comm_post_comments 에 저장
	 -->
	<insert id="insertComment" parameterClass="com.community.vo.Comment">
		insert into comm_post_comments
		(comment_no, comment_emp_no, comment_content, comment_post_no, comment_deleted_date)
		values
		(comm_comments_seq.nextval, #empNo#, #content#, #postNo#, #deletedDate#)
	</insert>
	
	
	<!-- 
		게시글 번호를 전달받아서, 해당게시글의 리뷰들을 comm_post_comments
	 -->
	 <select id="getCommentsByPostNo" parameterClass="int" resultClass="com.community.vo.Comment">
	 	select
	 		comment_no as no,
	 		comment_emp_no as empNo,
	 		comment_content as content,
	 		comment_created_date as createdDate,
	 		comment_post_no as postNo
	 	from
	 		comm_post_comments
	 	where 
	 		comment_post_no = #value#
	 	order by
	 		comment_no asc
	 
	 </select>
	 
	 
</sqlMap>